@import "../../../../vendor/filament/filament/resources/css/theme.css";

@config 'tailwind.config.js';

@layer utilities {
    /* Neutral palette swap: force Zinc neutrals in dark mode */
    .dark {
        /* Filament/Tailwind often reference gray/slate tokens; align both to Zinc */
        --color-gray-50: 250 250 250; /* zinc-50 */
        --color-gray-100: 244 244 245; /* zinc-100 */
        --color-gray-200: 228 228 231; /* zinc-200 */
        --color-gray-300: 212 212 216; /* zinc-300 */
        --color-gray-400: 161 161 170; /* zinc-400 */
        --color-gray-500: 113 113 122; /* zinc-500 */
        --color-gray-600: 82 82 91; /* zinc-600 */
        --color-gray-700: 63 63 70; /* zinc-700 */
        --color-gray-800: 39 39 42; /* zinc-800 */
        --color-gray-900: 24 24 27; /* zinc-900 */
        --color-slate-50: var(--color-gray-50);
        --color-slate-100: var(--color-gray-100);
        --color-slate-200: var(--color-gray-200);
        --color-slate-300: var(--color-gray-300);
        --color-slate-400: var(--color-gray-400);
        --color-slate-500: var(--color-gray-500);
        --color-slate-600: var(--color-gray-600);
        --color-slate-700: var(--color-gray-700);
        --color-slate-800: var(--color-gray-800);
        --color-slate-900: var(--color-gray-900);
    }

    /* Dark mode primary buttons: ensure readable white text */
    .dark .fi-btn.fi-btn-color-primary,
    .dark .fi-btn.fi-btn-color-primary * {
        color: #ffffff !important;
    }

    /* Custom placement for Filament Language Switch Outside Panel (Admin) */
    .fls-display-on {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 50;
        display: flex;
        justify-content: center; /* centers child horizontally */
        padding: 1rem;
        pointer-events: none; /* optional, allows clicks to pass through */
    }

    .fls-display-on > * {
        pointer-events: auto; /* enable interaction for inner content */
    }

    /* Hide the repeater-collapsible toolbar */
    .no-repeater-collapse-toolbar .fi-link {
        display: none !important;
    }

    /* Global Search Modal Styles for DT */
    .global-search-modal-details .inline.font-medium {
        font-size: 0.75rem !important;
    }

    /* Global Search Modal Details for DD */
    .global-search-modal-details .inline {
        font-size: 0.75rem !important;
    }

    /* Note: Native danger (red) utilities now come from the main app Tailwind bundle.
       We load both theme.css & app.css via ->viteTheme([...]) in AdminPanelProvider.
       No manual danger fallbacks are necessary. If reds ever vanish again, first confirm
       both CSS files are loading before re-adding overrides. */

    /* Language switch header trigger: force white background */
    .language-switch-trigger {
        background-color: #ffffff !important;
        /* Fallback: inset shadow border ensures visibility even if cascade issues */
        box-shadow: inset 0 0 0 1px rgb(3 7 18 / 0.1),
            0 1px 2px 0 rgb(0 0 0 / 0.04);
    }
    .language-switch-trigger:hover,
    .language-switch-trigger:focus-visible {
        box-shadow: inset 0 0 0 1px rgb(3 7 18 / 0.2),
            0 1px 2px 0 rgb(0 0 0 / 0.06);
    }
    .dark .language-switch-trigger {
        background-color: rgb(255 255 255 / 0.05) !important;
        border: 1px solid rgb(255 255 255 / 0.2) !important;
        box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    }
    /* Flowforge Kanban card title normal weight (lean override) */
    .ff-card__title {
        font-weight: 400 !important;
    }

    /* Force sidebar to pin on large screens, with full viewport height */
    @media (min-width: 1024px) {
        /* Pin the sidebar */
        .fi-main-sidebar.fi-sidebar,
        .fi-main-sidebar .fi-sidebar {
            position: fixed !important;
            top: 0;
            inset-inline-start: 0;
            height: 100vh;
            z-index: 20;
        }

        /* Reserve space for the fixed sidebar */
        .fi-main-ctn {
            margin-inline-start: var(--sidebar-width) !important;
        }

        /* Action Board: remove vertical scrolling on the page when Flowforge board is present */
        .fi-main:has(.ff-board),
        .fi-page:has(.ff-board) {
            overflow-y: hidden !important;
        }

        /* Ensure the main container fills the viewport to avoid stray scrollbars */
        .fi-main:has(.ff-board) {
            min-height: 80vh;
            max-height: 90vh;
        }
    }

    /* Action Board: clamp each column's internal scroll area to avoid page-level scrollbars */
    .fi-page:has(.ff-board) .ff-board__columns {
        overflow-y: hidden;
    }

    /* Tighten column content height relative to viewport to be below the page chrome */
    .fi-page:has(.ff-board) .ff-column__content {
        max-height: calc(100vh - 17rem) !important;
    }

    /* Final guard: disable body vertical scroll when the board is present */
    body:has(.ff-board),
    html:has(.ff-board) {
        overflow-y: hidden !important;
        height: 100%;
    }

    /* Explicit board sizing so page + board fits viewport without page scroll */
    .fi-page .ff-board {
        height: calc(100vh - 16rem) !important;
    }

    /* Ensure columns region fills the board height */
    .fi-page .ff-board__columns {
        height: 100% !important;
    }

    /* Columns respect the board height */
    .fi-page .ff-column {
        max-height: 100% !important;
    }

    /* Deduct column header (~3.25rem) from column scroll area */
    .fi-page .ff-column__content {
        max-height: calc(100% - 3.25rem) !important;
    }
}
